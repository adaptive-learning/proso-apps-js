<div id="proso-toolbar">
    <div id="config-bar-show-button" ng-click="opened = !opened" ng-hide="opened"> proso bar </div>

    <div id="config-bar" ng-cloak ng-show="opened">
        <div id="config-bar-header">
            <span id="config-bar-hide" ng-click="opened = !opened">Close</span>
        </div>
        <ul id="config-bar-content">
            <li>
                <span ng-click="addToOverride(propertyToOverride)" class="add-to-override">+</span>
                <input type="text" ng-model="propertyToOverride" id="config-bar-property-name" placeholder="Property Name" />
            </li>
            <li>
                <span ng-click="removeOverridden('user'); overridden.user = null;" class="reset">X</span>
                <input type="number" ng-model="overridden.user" placeholder="User" ng-change="override('user', overridden.user)" />
            </li>
            <li>
                <span ng-click="removeOverridden('time'); overridden.time= null;" class="reset">X</span>
                <input type="text" ng-model="overridden.time" placeholder="Time" ng-change="override('time', overridden.time)" />
                <i>{{date | date:'yyyy-MM-dd_HH:mm:ss'}}</i>
            </li>
            <li ng-repeat="(name, value) in getOverridden() track by name">
                <span class="reset" ng-click="removeOverridden(name)">X</span>
                <input type="text" disabled class="property-name" ng-model="name" />
                <input type="text" class="property-value" placeholder="Value" ng-model="value" ng-change="override(name, value)" />
            </li>
            <div class='section' ng-click="openABTesting()">AB Testing <span id="abExperimentName">{{abExperiment.identifier }}</span></div>
            <ul id="config-bar-ab" ng-cloak ng-show="abTestingOpened">
                <li>
                    <ul id="abSetupInfo">
                        <li ng-repeat="setup in abExperiment.setups">
                            <strong class="setup-id">#{{ setup.id }}</strong>
                            <ul>
                                <li ng-repeat="value in setup.values">
                                    <span class="variable-name">{{ value.variable.app_name }}.{{ value.variable.name }}</span>
                                    <span class="variable-value">{{ value.value }}</span>
                                    <span class="comma" ng-if="!$last">,</a>
                                </li>
                            </ul>
                        </li>
                    </ul>
                <li>
                <div id="abChart"></div>
                <li>
                    <button ng-click="drawABTesting()" class="ab-experiment-chart-button">All</button>
                    <button ng-click="drawABTesting('number_of_users')" class="ab-experiment-chart-button">Users</button>
                    <button ng-click="drawABTesting('number_of_answers_median')" class="ab-experiment-chart-button">Answers</button>
                    <button ng-click="drawABTesting('returning_chance')" class="ab-experiment-chart-button">Returning</button>
                </li>
            </ul>
            <div class='section' ng-click="flashcardsOpened = !flashcardsOpened">Flashcards</div>
            <ul id="config-bar-flashcards" ng-cloak ng-show="flashcardsOpened">
                <li>
                    <input type="text" ng-model="flashcardsCategories" placeholder="Categories" />
                    <input type="text" ng-model="flashcardsContexts" placeholder="Contexts" />
                    <input type="text" ng-model="flashcardsTypes" placeholder="Types" />
                </li>
                <li>
                    <input type="text" ng-model="flashcardsLimit" placeholder="Limit" />
                    <button ng-click="showFlashcardsPractice()">Show Practice</button>
                </li>
                <div style="overflow: auto; width: 100%; height: 300px;">
                    <div id="flashcardsChart"></div>
                </div>
            </ul>
            <div class='section' ng-click="auditOpened = !auditOpened">Models Audit</div>
            <ul id="config-bar-audit" ng-cloak ng-show="auditOpened">
                <li>
                    <input type="text" ng-model="auditLimit" placeholder="Limit" />
                    <input type="text" ng-model="auditKey" placeholder="Key" id="config-bar-audit-key" />
                    <input type="text" ng-model="auditUser" placeholder="User" />
                </li>
                <li>
                    <input type="text" ng-model="auditPrimary" placeholder="Item Primary" />
                    <input type="text" ng-model="auditSecondary" placeholder="Item Secondary" />
                    <button ng-click="showAuditChart()">Show Chart</button>
                </li>
                <div id="auditChart"></div>
            </ul>
            <div class='section' ng-click="loggingOpened = !loggingOpened">Logging</div>
            <ul id="config-bar-logging" ng-cloak ng-show="loggingOpened">
                <li ng-repeat="event in debugLog|limitTo:100" class="logging-event">
                    <span class="level">{{ event.level }}</span>
                    <span class="url">{{ event.url }}</span>
                    <span class="filename">{{ event.filename }}:{{ event.line_number }}</span>
                    <span class="message">{{ event.message }}</span>
                </li>
            </ul>
        </ul>
    </div>
</div>
